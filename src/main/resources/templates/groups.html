<!DOCTYPE html>
<html lang="en">
<head>
	<title>Social - Network, Community and Event Theme</title>

	<!-- Meta Tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Webestica.com">
	<meta name="description" content="Bootstrap 5 based Social Media Network and Community Theme">

	<!-- Dark mode -->
	<script>
		const storedTheme = localStorage.getItem('theme')
 
		const getPreferredTheme = () => {
			if (storedTheme) {
				return storedTheme
			}
			return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
		}

		const setTheme = function (theme) {
			if (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
				document.documentElement.setAttribute('data-bs-theme', 'dark')
			} else {
				document.documentElement.setAttribute('data-bs-theme', theme)
			}
		}

		setTheme(getPreferredTheme())

		window.addEventListener('DOMContentLoaded', () => {
		    var el = document.querySelector('.theme-icon-active');
			if(el != 'undefined' && el != null) {
				const showActiveTheme = theme => {
				const activeThemeIcon = document.querySelector('.theme-icon-active use')
				const btnToActive = document.querySelector(`[data-bs-theme-value="${theme}"]`)
				const svgOfActiveBtn = btnToActive.querySelector('.mode-switch use').getAttribute('href')

				document.querySelectorAll('[data-bs-theme-value]').forEach(element => {
					element.classList.remove('active')
				})

				btnToActive.classList.add('active')
				activeThemeIcon.setAttribute('href', svgOfActiveBtn)
			}

			window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
				if (storedTheme !== 'light' || storedTheme !== 'dark') {
					setTheme(getPreferredTheme())
				}
			})

			showActiveTheme(getPreferredTheme())

			document.querySelectorAll('[data-bs-theme-value]')
				.forEach(toggle => {
					toggle.addEventListener('click', () => {
						const theme = toggle.getAttribute('data-bs-theme-value')
						localStorage.setItem('theme', theme)
						setTheme(theme)
						showActiveTheme(theme)
					})
				})

			}
		})
		
	</script>

	<!-- Favicon -->
	<link rel="shortcut icon" href="/assets/images/favicon.ico">

	<!-- Google Font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Hind:wght@300;400;500;600;700&display=swap">

	<!-- Plugins CSS -->
	<link rel="stylesheet" type="text/css" href="/assets/vendor/font-awesome/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="/assets/vendor/bootstrap-icons/bootstrap-icons.css">
	<link rel="stylesheet" type="text/css" href="/assets/vendor/choices.js/public/assets/styles/choices.min.css">

	<!-- Theme CSS -->
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.js"></script>

</head>

<body>

<!-- =======================
Header START -->
<header class="navbar-light fixed-top header-static bg-mode">
  <!-- Logo Nav START -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid" id="header">
            <!-- SideNav button -->
            <!-- Logo START -->

            <!-- Logo Nav END -->
            <!-- Nav right END -->
        </div>
    </nav>
    <!-- Logo Nav END -->
</header>
<!-- =======================
Header END -->

<!-- **************** MAIN CONTENT START **************** -->
<main>
  
  <!-- Container START -->
  <div class="container">
    <div class="row g-4">

      <!-- Sidenav START -->
        <div class="col-md-2 col-lg-2 col-xxl-2 mt-n4" id="leftNav">

        </div>
      <!-- Sidenav END -->

      <!-- Main content START -->
      <div class="col-md-8 col-lg-6 vstack gap-4">
          <!-- Card START -->
          <div class="card">
            <!-- Card header START -->
            <div class="card-header border-0 pb-0">
              <div class="row g-2">
                <div class="col-lg-2">
                  <!-- Card title -->
                  <h1 class="h4 card-title mb-lg-0">그룹</h1>
                </div>
                <div class="col-sm-6 col-lg-3 ms-lg-auto">
                  <!-- Select Groups -->

                </div>
                  <div class="col-sm-6 col-lg-3">
                  <!-- Button modal -->
                  <a class="btn btn-primary-soft ms-auto w-100" href="#" data-bs-toggle="modal" data-bs-target="#modalCreateGroup"> <i class="fa-solid fa-plus pe-1"></i>그룹 생성</a>
                </div>
              </div>
            </div>
            <!-- Card header START -->
            <!-- Card body START -->
            <div class="card-body">
              <!-- Tab nav line -->
              <ul class="nav nav-tabs nav-bottom-line justify-content-center justify-content-md-start">
                <li class="nav-item"> <a class="nav-link active" data-bs-toggle="tab" href="#tab-1"> 내 그룹 </a> </li>
                <li class="nav-item"> <a class="nav-link" data-bs-toggle="tab" href="#tab-2"> 가입된 그룹  </a> </li>

              </ul>
              <div class="tab-content mb-0 pb-0">

                <!-- Friends groups tab START -->
                <div class="tab-pane fade show active" id="tab-1">
                  <div id="group-list" class="row g-4">
<!--------------------------------------------------------------------------------------------------->
                  </div>
                </div>
                  <!-- Friends' groups tab END -->

                <!-- Suggested for you START -->
                <div class="tab-pane fade" id="tab-2">
                    <div id="group-list2" class="row g-4">

                    </div>
                </div>
                <!-- Suggested for you END -->


            </div>
          </div>
          <!-- Card body END -->
        </div>
        <!-- Card END -->
      </div>
      <!-- Right sidebar END -->

    </div> <!-- Row END -->
  </div>
  <!-- Container END -->

</main>
<!-- **************** MAIN CONTENT END **************** -->

<!-- Modal create group START -->
<div class="modal fade" id="modalCreateGroup" tabindex="-1" aria-labelledby="modalLabelCreateGroup" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Title -->
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabelCreateGroup">그룹 생성하기</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Form START -->

          <!-- Group name -->
          <div class="mb-3">
            <label class="form-label">그룹 이름</label>
            <input id="name" name="name" type="text" class="form-control" placeholder="그룹 이름을 입력해주세요.">
          </div>
          <!-- Group picture -->
          <div class="mb-3">
            <label class="form-label">그룹 사진</label>
            <!-- Avatar upload START -->
            <div class="d-flex align-items-center">
              <div class="avatar-uploader me-3">
                <div class="mb-3">
                  <img id="groupImg" alt="사진 없음" src="/assets/images/avatar/placeholder.jpg" class="rounded-circle" style="width: 100px; height: 100px;">
                </div>
                <div>
                  <input type="file" accept=".png, .jpg, .jpeg" name="profile_url" id="fileInput">
                </div>
              </div>

                <!-- Avatar edit -->
<!--                <div class="avatar-edit">-->
<!--                  <input name="profile_url" type='file' id="avatarUpload" accept=".png, .jpg, .jpeg" />-->
<!--                  <label for="avatarUpload"></label>-->
<!--                </div>-->
<!--                <div class="avatar avatar-xl position-relative">-->
<!--                  <img id="avatar-preview" class="avatar-img rounded-circle border border-white border-3 shadow" src="/assets/images/avatar/placeholder.jpg" alt="">-->
<!--                </div>-->
<!--              </div>-->
<!--              <div class="avatar-remove">-->
<!--                <button type="button" id="avatar-reset-img" class="btn btn-light">사진 삭제</button>-->
<!--              </div>-->
            </div>
            <!-- Avatar upload END -->
          </div>
          <!-- Select audience -->
          <div class="mb-3">
            <label class="form-label d-block">공개 여부</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="open" id="public" value="1" checked="checked" onchange="togglePassword()">
              <label class="form-check-label" for="public">공개</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="open" id="private" value="0" onchange="togglePassword()">
              <label class="form-check-label" for="private">비공개</label>
            </div>
          </div>
          <!-- Invite friend -->
          <div id="passwordDiv" class="mb-3" style="display: none;">
            <label class="form-label">그룹 비밀번호 </label>
            <input id="group-pw" name = "pw" type="password" class="form-control" placeholder="그룹 비밀번호를 입력해주세요.">
          </div>
          <!-- Group description -->
          <div class="mb-3">
            <label class="form-label">그룹 소개 </label>
            <textarea id="intro" name = "intro" class="form-control" rows="3" placeholder="그룹 소개를 입력해주세요."></textarea>
          </div>

          <div class="modal-footer">
              <button onclick="createGroup()" class="btn btn-success-soft">그룹생성</button>
          </div>

        <!-- Form END -->
      </div>
      <!-- Modal footer -->

    </div>
  </div>
</div>
<!-- Modal create group END -->
<div
        class="modal fade"
        id="modalCreateFeed"
        tabindex="-1"
        aria-labelledby="modalLabelCreateFeed"
        aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <!-- Modal feed header START -->
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabelCreateFeed">게시물 작성</h5>
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
        ></button>
      </div>
      <!-- Modal feed header END -->
      <form enctype="multipart/form-data">
        <!-- Modal feed body START -->
        <div class="modal-body">
          <!-- Add Feed -->
          <div class="d-flex mb-3">
            <!-- Avatar -->
            <!--<div class="avatar avatar-xs me-2">
              <img
                      class="avatar-img rounded-circle"
                      src="assets/images/albums/07.jpg"
                      alt=""
              />
            </div>-->
            <!-- Feed box  -->
            <div class="col">
              <div class="row">
                      <textarea
                              class="form-control pe-4 fs-3 lh-1 border-0"
                              rows="1"
                              placeholder="제목"
                              autofocus
                              id="title"
                      ></textarea>
              </div>
              <div class="row">
                      <textarea
                              class="form-control pe-4 fs-3 lh-1 border-0"
                              rows="4"
                              placeholder="내용"
                              autofocus
                              id="content"
                      ></textarea>
              </div>
            </div>
          </div>
          <!-- Feed rect START -->
          <div class="hstack gap-2">
            <label
                    class="icon-md bg-success bg-opacity-10 text-success rounded-circle"
                    href="#"
                    data-bs-toggle="tooltip"
                    data-bs-placement="top"
                    title="사진"
                    for="uploadFile"
            >
              <i class="bi bi-image-fill"></i>
            </label>
            <input type="file" id="uploadFile" style="display:none" multiple/>
          </div>
          <!-- Feed rect END -->
        </div>
        <!-- Modal feed body END -->
        <div class = "row mt-3">
          <div class="col">
            <div class="container-fluid d-flex uploadResult" style="flex-wrap: wrap">
            </div>
          </div>
        </div>

        <!-- Modal feed footer -->
        <div class="modal-footer row justify-content-between">
          <!-- Select -->
          <div class="row">
            <div class="col-sm-4">
              <select
                      id="open_range"
                      class="form-select choice-select-text-none"
                      data-position="top"
                      data-search-enabled="false"
              >
                <option value=0>공개</option>
                <option value=1>친구 공개</option>
              </select>
            </div>
            <div class="col-sm-4">
              <select
                      id="group_id"
                      class="form-select choice-select-text-none"
                      data-position="top"
                      data-search-enabled="false"
              >
                <option value=0>마이페이지</option>
              </select>
              <!-- Button -->
            </div>

            <div class="col-sm-4 text-sm-end">
              <button type="button" id="posting-button" class="btn btn-success-soft">완료</button>
            </div>
          </div>
        </div>
      </form>
      <!-- Modal feed footer -->
    </div>
  </div>
</div>
<!-- =======================
JS libraries, plugins and custom scripts -->

<!-- Bootstrap JS -->
<script src="/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<!-- Vendors -->
<script src="/assets/vendor/glightbox-master/dist/js/glightbox.min.js"></script>
<script src="/assets/vendor/dropzone/dist/dropzone.js"></script>
<script src="/assets/vendor/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- Theme Functions -->
<script src="/assets/js/functions.js"></script>
<script src="/assets/js/Group/group-create.js"></script>
<script src="/assets/js/Group/group-view.js"></script>
<script src="/assets/js/Group/group-view2.js"></script>
<script src="/assets/js/Group/group-delete.js"></script>
<script src="/assets/js/Group/group-member-unregister.js"></script>

<script src="/assets/js/Feed/feed-posting.js"></script>
<script src="/assets/js/header.js"></script>



<script th:inline="javascript">
    function togglePassword() {
        var passwordField = document.getElementById("passwordDiv");
        if (document.getElementById("private").checked) {
            passwordField.style.display = "block";
        } else {
            passwordField.style.display = "none";
        }
    }
</script>

<script>
  imageViewer();
  function imageViewer() {
    const fileInput = document.getElementById('fileInput');
    const imgPreview = document.getElementById('groupImg');

    fileInput.addEventListener('change', (event) => {
      const file = event.target.files[0];
      const reader = new FileReader();

      reader.onload = (e) => {
        imgPreview.src = e.target.result;
      };

      reader.readAsDataURL(file);
    });
  }
</script>

</body>
</html>